// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    window.user = new window.models.User({
      id: window.userid
    });
    window.existingQueries = new window.collections.Queries();
    existingQueries._byTitle = {};
    window.mapObj = new window.GoogleMap;
    return user.fetch({
      success: function(model) {
        return existingQueries.fetch({
          success: function(coll) {
            var map;
            _.each(coll.models, function(query) {
              return existingQueries._byTitle[query.get("title")] = query;
            });
            map = new models.Query;
            map.user = user;
            window.map = map = new views.MapItem({
              model: map
            });
            map.render();
            window.app = new window.Workspace({
              user: user,
              controller: map
            });
            return Backbone.history.start();
          }
        });
      }
    });
  });

}).call(this);
